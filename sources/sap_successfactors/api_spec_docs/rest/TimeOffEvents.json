{
  "openapi": "3.0.3",
  "info": {
    "title": "Time Off Events",
    "description": "The API will return a list of absences, public holidays, and non-working days for the specified duration.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://{api-server}",
      "description": "REST APIs for the SuccessFactors Data Centers",
      "variables": {
        "api-server": {
          "description": "SuccessFactors Data Center host",
          "default": "apisalesdemo2.successfactors.eu"
        }
      }
    }
  ],
  "paths": {
    "/rest/timemanagement/absence/v1/events": {
      "get": {
        "summary": "The API will return a list of absences, public holidays, and non-working days for the specified duration.",
        "description": "The API provides a list of events (including active absences, public holidays, and non-working days) for the specified duration (up to a maximum of 12 months). It checks for relevant permissions, such as employee time view and workbench view. When there is no permission for employee time view, absences are excluded from the response. If no workbench view permission, the titles and approval status of absences are masked. The basic requirement is to have the \"Time Off\" or \"Leave of Absence\" feature enabled.",
        "tags": [
          "Time Off Events"
        ],
        "parameters": [
          {
            "name": "assignmentId",
            "in": "query",
            "required": true,
            "description": "The assignmentUUID of the user for whom the events are retrieved. It also accepts the userId, but using assignmentUUID is recommended.",
            "schema": {
              "type": "string"
            },
            "examples": {
              "assignmentId": {
                "value": "23a8043c-e50d-4076-b0bc-8d59657fa97a"
              },
              "userId": {
                "value": "userid"
              }
            }
          },
          {
            "name": "types",
            "in": "query",
            "required": true,
            "description": "The types of events to be retrieved. Multiple types can be specified in a comma-separated format.",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "ABSENCE",
                  "PUBLIC_HOLIDAY",
                  "NON_WORKING_DAY"
                ]
              }
            },
            "explode": false,
            "example": "ABSENCE,PUBLIC_HOLIDAY"
          },
          {
            "name": "startDate",
            "in": "query",
            "required": true,
            "description": "Events from this date will be retrieved. The date must be in the format YYYY-MM-DD.",
            "schema": {
              "type": "string",
              "format": "date",
              "example": "2024-02-01"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "required": true,
            "description": "Events until this date will be retrieved. The date must be in the format YYYY-MM-DD.",
            "schema": {
              "type": "string",
              "format": "date",
              "example": "2024-05-05"
            }
          },
          {
            "name": "includePartialDayAbsences",
            "in": "query",
            "required": false,
            "description": "Whether to include partial-day absences in the response. By default these absences are excluded.",
            "schema": {
              "type": "boolean",
              "example": true
            }
          },
          {
            "name": "excludeAbsencesStartingBeforeSelectionPeriod",
            "in": "query",
            "required": false,
            "description": "Whether to exclude absences with a start date before the specified start date. By default, active absences within the selection period are retrieved.",
            "schema": {
              "type": "boolean",
              "example": true
            }
          },
          {
            "name": "absenceStatus",
            "in": "query",
            "required": false,
            "description": "The status of absences to be retrieved. Multiple statuses can be specified in a comma-separated format. If not specified, the default absences (PENDING, APPROVED, PENDING_CANCELLATION) are retrieved.",
            "schema": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "PENDING",
                  "CANCELLED",
                  "APPROVED",
                  "REJECTED",
                  "PENDING_CANCELLATION"
                ]
              },
              "example": "APPROVED,REJECTED"
            }
          },
          {
            "name": "$top",
            "in": "query",
            "required": false,
            "description": "The maximum number of events to return in the response.",
            "schema": {
              "type": "integer",
              "example": 10
            }
          },
          {
            "name": "$skip",
            "in": "query",
            "required": false,
            "description": "The number of events to skip before beginning to return events in the response.",
            "schema": {
              "type": "integer",
              "example": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "It indicates that the request is successful.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "value": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/TimeOffEventResponse"
                      }
                    }
                  }
                },
                "examples": {
                  "absence": {
                    "$ref": "#/components/examples/TimeOffEventAbsenceResponseExample"
                  },
                  "holiday": {
                    "$ref": "#/components/examples/TimeOffEventHolidayResponseExample"
                  },
                  "nonWorkingDay": {
                    "$ref": "#/components/examples/TimeOffEventNonWorkingDayResponseExample"
                  }
                }
              }
            }
          },
          "400": {
            "description": "It indicates that the server cannot process the request due to something that is perceived to be a client error. For example, assignmentId is not valid.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BadRequest"
                }
              }
            }
          },
          "403": {
            "description": "It indicates that the server cannot process the request as the user does not have the required permission to access the resource.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Forbidden"
                }
              }
            }
          },
          "404": {
            "description": "It indicates that the server has not found anything matching the request URI or the requested resource doesn't exist. For example, this response will be returned if the 'Time Off' feature is disabled.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NotFound"
                }
              }
            }
          },
          "500": {
            "description": "It indicates that the server encountered an unexpected condition that prevented it from fulfilling the request.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InternalServerError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "sfOauth": {
        "type": "oauth2",
        "description": "Successfactors OAuth 2.0 flow. More information is available [here](https://help.sap.com/docs/SAP_SUCCESSFACTORS_PLATFORM/9f5f060351034d98990213d077dab38a/d9a9545305004187986c866de2b66987.html?locale=en-US)",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "https://{api-server}/oauth/token",
            "scopes": {}
          }
        }
      }
    },
    "schemas": {
      "TimeOffEventResponse": {
        "type": "object",
        "properties": {
          "externalCode": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "startDate": {
            "type": "string",
            "format": "date"
          },
          "endDate": {
            "type": "string",
            "format": "date"
          },
          "startTime": {
            "type": "string",
            "nullable": true
          },
          "endTime": {
            "type": "string",
            "nullable": true
          },
          "duration": {
            "type": "number"
          },
          "timeUnit": {
            "type": "string"
          },
          "durationFormatted": {
            "type": "string"
          },
          "crossMidnight": {
            "type": "boolean"
          },
          "type": {
            "type": "string"
          },
          "typeFormatted": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "statusFormatted": {
            "type": "string"
          },
          "absenceDurationCategory": {
            "type": "string",
            "nullable": true
          }
        }
      },
      "BadRequest": {
        "type": "object",
        "title": "Bad Request Exception",
        "description": "Response body",
        "properties": {
          "error": {
            "title": "Error",
            "type": "object",
            "properties": {
              "code": {
                "title": "Code",
                "type": "string",
                "example": "BadRequest"
              },
              "message": {
                "title": "Message",
                "type": "string",
                "example": "User not found."
              }
            }
          }
        }
      },
      "Forbidden": {
        "type": "object",
        "title": "Forbidden Exception",
        "description": "Response body",
        "properties": {
          "error": {
            "title": "Error",
            "type": "object",
            "properties": {
              "code": {
                "title": "Code",
                "type": "string",
                "example": "Forbidden"
              },
              "message": {
                "title": "Message",
                "type": "string",
                "example": "You can't access the requested resource."
              }
            }
          }
        }
      },
      "NotFound": {
        "type": "object",
        "title": "Not Found Exception",
        "description": "Response body",
        "properties": {
          "error": {
            "title": "Error",
            "type": "object",
            "properties": {
              "code": {
                "title": "Code",
                "type": "string",
                "example": "NotFound"
              },
              "message": {
                "title": "Message",
                "type": "string",
                "example": "The requested resource can't be found."
              }
            }
          }
        }
      },
      "InternalServerError": {
        "type": "object",
        "title": "Internal Server Error Exception",
        "properties": {
          "error": {
            "title": "Error",
            "type": "object",
            "properties": {
              "code": {
                "title": "Code",
                "type": "string",
                "example": "InternalError"
              },
              "message": {
                "title": "Message",
                "type": "string",
                "example": "An unexpected error has occurred. Please contact the system administrator."
              }
            }
          }
        }
      }
    },
    "examples": {
      "TimeOffEventAbsenceResponseExample": {
        "summary": "ABSENCE",
        "value": {
          "value": [
            {
              "externalCode": "6273b315aafa4e3bb4ca2d8b01997ed6",
              "title": "VACATION",
              "startDate": "2024-02-01",
              "endDate": "2024-02-02",
              "startTime": null,
              "endTime": null,
              "duration": 2,
              "timeUnit": "DAYS",
              "durationFormatted": "2 days",
              "crossMidnight": false,
              "type": "ABSENCE",
              "typeFormatted": "Absence",
              "status": "APPROVED",
              "statusFormatted": "Approved",
              "absenceDurationCategory": "MULTI_DAY"
            }
          ]
        }
      },
      "TimeOffEventNonWorkingDayResponseExample": {
        "summary": "NON_WORKING_DAY",
        "value": {
          "value": [
            {
              "externalCode": "ef3xaf18738c438687a9787f54dst3",
              "title": "Non Working Day",
              "startDate": "2024-02-18",
              "endDate": "2024-02-18",
              "startTime": null,
              "endTime": null,
              "duration": 1,
              "timeUnit": "DAYS",
              "durationFormatted": "1 day",
              "crossMidnight": false,
              "type": "NON_WORKING_DAY",
              "typeFormatted": "Non Working Day",
              "status": null,
              "statusFormatted": null,
              "absenceDurationCategory": null
            }
          ]
        }
      },
      "TimeOffEventHolidayResponseExample": {
        "summary": "ABSENCE,PUBLIC_HOLIDAY",
        "value": {
          "value": [
            {
              "externalCode": "g4bxas18712dc43863sc97ww74b76512s",
              "title": "SICKNESS",
              "startDate": "2024-03-28",
              "endDate": "2024-03-28",
              "startTime": null,
              "endTime": null,
              "duration": 1,
              "timeUnit": "DAYS",
              "durationFormatted": "1 day",
              "crossMidnight": false,
              "type": "ABSENCE",
              "typeFormatted": "Absence",
              "status": "APPROVED",
              "statusFormatted": "Approved",
              "absenceDurationCategory": "SINGLE_FULL_DAY"
            },
            {
              "externalCode": "f4b7a018788c438687a9787f4b76bb0c",
              "title": "Good Friday",
              "startDate": "2024-03-29",
              "endDate": "2024-03-29",
              "startTime": null,
              "endTime": null,
              "duration": 1,
              "timeUnit": "DAYS",
              "durationFormatted": "1 day",
              "crossMidnight": false,
              "type": "PUBLIC_HOLIDAY",
              "typeFormatted": "Public Holiday",
              "status": null,
              "statusFormatted": null,
              "absenceDurationCategory": null
            },
            {
              "externalCode": "f4b7a018788c438687a9787f4b76bb0c",
              "title": "Easter Monday",
              "startDate": "2024-04-01",
              "endDate": "2024-04-01",
              "startTime": null,
              "endTime": null,
              "duration": 1,
              "timeUnit": "DAYS",
              "durationFormatted": "1 day",
              "crossMidnight": false,
              "type": "PUBLIC_HOLIDAY",
              "typeFormatted": "Public Holiday",
              "status": null,
              "statusFormatted": null,
              "absenceDurationCategory": null
            }
          ]
        }
      }
    }
  },
  "security": [
    {
      "sfOauth": []
    }
  ],
  "x-sap-api-type": "REST",
  "x-sap-shortText": "APIs for SAP SuccessFactors Time Management.",
  "externalDocs": {
    "description": "More information about this API is available on help.sap.com",
    "url": "https://help.sap.com/docs/SAP_SUCCESSFACTORS_EMPLOYEE_CENTRAL/68de09dff990417b9f0acf6ccc13a14d/b72aaaf5747f4fca99f68972f9ec41a2.html?state=LATEST"
  }
}